{"code":"webpackHotUpdate(0,{66:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=l(a(1)),o=l(a(6));l(a(7)),a(8);function l(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={userName:\"\",password:\"\"},a.handleChange=a.handleChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),n(t,[{key:\"handleChange\",value:function(e){var t=e.target.name,a=e.target.value;this.setState(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},t,a))}},{key:\"resetCookie\",value:function(e){this.deleteCookie();var t=new Date,a=new Date;a.setMinutes(t.getMinutes()+30),this.saveCookie(e,a)}},{key:\"deleteCookie\",value:function(){var e=new Date;document.cookie=\"token=;expires=\"+e.toUTCString(),alert(\"delete document.cookie: \"+document.cookie)}},{key:\"saveCookie\",value:function(e,t){document.cookie=\"token=\"+e+\";expires=\"+t.toUTCString();var a=document.cookie;alert(\"tokenStr: \"+a)}},{key:\"handleSubmit\",value:function(e){e.preventDefault(),this.login()}},{key:\"login\",value:function(){if(this.isValidLoginData()){var e=this.prepareQueryData();this.postToServer(\"http://localhost:6868/user/login\",e)}}},{key:\"postToServer\",value:function(e,t){var a=this;o.default.post(e,t).then(function(e){console.log(e.data);var t=e.data.code;if(1.1==t){if(0==e.data.user.userType){var n=e.data.user.accessToken;a.resetCookie(n),a.redirectTo(\"/\")}}else 2.5==t&&alert(\"Incorrect username or password!\")}).catch(function(e){alert(\"Server Error!: \"+e)})}},{key:\"prepareQueryData\",value:function(){return{loginAlias:this.state.userName,loginType:0,password:this.state.password}}},{key:\"isValidLoginData\",value:function(){return null==this.state.userName||\"\"===this.state.userName||null==this.state.password||\"\"===this.state.password?(alert(\"invalid\"),!1):(alert(\"valid\"),!0)}},{key:\"redirectTo\",value:function(e){window.location.href=e}},{key:\"render\",value:function(){return r.default.createElement(\"div\",{class:\"login-img3-body\"},r.default.createElement(\"div\",{class:\"container\"},r.default.createElement(\"form\",{class:\"login-form\",action:\"index.html\",onSubmit:this.handleSubmit},r.default.createElement(\"div\",{class:\"login-wrap\"},r.default.createElement(\"p\",{class:\"login-img\"},r.default.createElement(\"i\",{class:\"icon_lock_alt\"})),r.default.createElement(\"div\",{class:\"input-group\"},r.default.createElement(\"span\",{class:\"input-group-addon\"},r.default.createElement(\"i\",{class:\"icon_profile\"})),r.default.createElement(\"input\",{name:\"userName\",onChange:this.handleChange,type:\"text\",class:\"form-control\",placeholder:\"Username\",autofocus:!0})),r.default.createElement(\"div\",{class:\"input-group\"},r.default.createElement(\"span\",{class:\"input-group-addon\"},r.default.createElement(\"i\",{class:\"icon_key_alt\"})),r.default.createElement(\"input\",{name:\"password\",onChange:this.handleChange,type:\"password\",class:\"form-control\",placeholder:\"Password\"})),r.default.createElement(\"label\",{class:\"checkbox\"},r.default.createElement(\"input\",{type:\"checkbox\",value:\"remember-me\"}),\" Remember me\",r.default.createElement(\"span\",{class:\"pull-right\"},\" \",r.default.createElement(\"a\",{href:\"#\"},\" Forgot Password?\"))),r.default.createElement(\"button\",{class:\"btn btn-primary btn-lg btn-block\",type:\"submit\"},\"Login\"))),r.default.createElement(\"div\",{class:\"text-right\"},r.default.createElement(\"div\",{class:\"credits\"}))))}}]),t}();t.default=i}});","extractedComments":[]}